<?xml version="1.0" encoding="UTF-8"?>

<atlassian-plugin key="${atlassian.plugin.key}" name="${project.name}" plugins-version="2"> 
  <plugin-info> 
    <description>${project.description}</description>  
    <version>${project.version}</version>  
    <vendor name="${project.organization.name}" url="${project.organization.url}"/>  
    <param name="plugin-icon">images/pluginIcon.png</param>  
    <param name="plugin-logo">images/pluginLogo.png</param>  
    <param name="configure.url">/plugins/servlet/groupie/admin</param>
    <param name="arbitrary">Am Israel Chai</param>
  </plugin-info>
  <!-- add our i18n resource -->
  <resource type="i18n" name="i18n" location="groupie"/>
  <!-- add our web resources -->
  <web-resource key="groupie-resources" name="groupie Web Resources">
    <dependency>com.atlassian.auiplugin:ajs</dependency>
    <resource type="download" name="groupie.css" location="/css/groupie.css"/>
    <resource type="download" name="groupie.js" location="/js/groupie.js"/>
    <resource type="download" name="images/" location="/images"/>
    <context>groupie</context>
  </web-resource>
  <servlet-filter name="AuthorizationServletFilter" i18n-name-key="authorization-servlet-filter.name" key="authorization-servlet-filter" class="com.groupie.servlet.AuthorizationServletFilter" location="before-decoration" weight="100">
    <description key="authorization-servlet-filter.description">Responsible for ensuring the authorization of incoming requests</description>
    <url-pattern>/display/*</url-pattern>
    <url-pattern>/pages/*</url-pattern>
    <url-pattern>/spaces/*</url-pattern>
    <url-pattern>/plugins/servlet/groupie/test</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
<!--    <dispatcher>INCLUDE</dispatcher>-->
<!--    <dispatcher>ERROR</dispatcher>-->
  </servlet-filter>
  <servlet name="AdminFormServlet" i18n-name-key="admin-form-servlet.name" key="admin-form-servlet" class="com.groupie.servlet.AdminFormServlet">
    <description key="admin-form-servlet.description">Responsible for serving the plugin's admin form</description>
    <url-pattern>/groupie/admin</url-pattern>
  </servlet>
  <rest name="ConfigRestHandler" i18n-name-key="config-rest-handler.name" key="config-rest-handler" path="/groupie" version="1.0">
    <description key="config-rest-handler.description">Responsible for handling GET and PUT generated by the plugin's admin form</description>
  </rest>
</atlassian-plugin>
